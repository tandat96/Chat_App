{"ast":null,"code":"import _defineProperty from \"D:\\\\my_project\\\\test\\\\React App\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"D:\\\\my_project\\\\test\\\\React App\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\my_project\\\\test\\\\React App\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"D:\\\\my_project\\\\test\\\\React App\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\my_project\\\\test\\\\React App\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\my_project\\\\test\\\\React App\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\my_project\\\\test\\\\React App\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\my_project\\\\test\\\\React App\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\my_project\\\\test\\\\React App\\\\src\\\\pages\\\\authentication\\\\registration\\\\Registration.js\";\nimport React, { Component } from 'react';\nimport { Alert, Form, Button } from 'react-bootstrap';\nimport { withRouter } from 'react-router-dom';\nimport { DebounceInput } from 'react-debounce-input';\nimport ChatHttpServer from '../../../utils/ChatHttpServer.js';\nimport './Registration.css';\n\nvar Registration =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Registration, _Component);\n\n  function Registration(props) {\n    var _this;\n\n    _classCallCheck(this, Registration);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Registration).call(this, props));\n\n    _this.handleRegistration =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                event.preventDefault();\n\n                _this.props.loadingState(true);\n\n                _context.prev = 2;\n                _context.next = 5;\n                return ChatHttpServer.register(_this.state);\n\n              case 5:\n                response = _context.sent;\n\n                _this.props.loadingState(false);\n\n                if (response.error) {\n                  alert('Unable to register, try after some time.');\n                } else {\n                  ChatHttpServer.setLS('userid', response.userId);\n\n                  _this.props.history.push(\"/home\");\n                }\n\n                _context.next = 14;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](2);\n\n                _this.props.loadingState(false);\n\n                alert('Unable to register, try after some time.');\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 10]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.checkUsernameAvailability =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(event) {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(event.target.value !== '' && event.target.value !== undefined)) {\n                  _context2.next = 17;\n                  break;\n                }\n\n                _this.setState({\n                  username: event.target.value\n                });\n\n                _this.props.loadingState(true);\n\n                _context2.prev = 3;\n                _context2.next = 6;\n                return ChatHttpServer.checkUsernameAvailability(_this.state.username);\n\n              case 6:\n                response = _context2.sent;\n\n                _this.props.loadingState(false);\n\n                if (response.error) {\n                  _this.setState({\n                    usernameAvailable: false\n                  });\n                } else {\n                  _this.setState({\n                    usernameAvailable: true\n                  });\n                }\n\n                _context2.next = 15;\n                break;\n\n              case 11:\n                _context2.prev = 11;\n                _context2.t0 = _context2[\"catch\"](3);\n\n                _this.props.loadingState(false);\n\n                _this.setState({\n                  usernameAvailable: false\n                });\n\n              case 15:\n                _context2.next = 18;\n                break;\n\n              case 17:\n                if (event.target.value === '') {\n                  _this.setState({\n                    usernameAvailable: true\n                  });\n                }\n\n              case 18:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[3, 11]]);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.handleInputChange = function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n    };\n\n    _this.state = {\n      username: '',\n      password: '',\n      usernameAvailable: true\n    };\n    return _this;\n  }\n\n  _createClass(Registration, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Form, {\n        className: \"auth-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        controlId: \"formUsername\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(DebounceInput, {\n        className: \"form-control\",\n        placeholder: \"Enter username\",\n        minLength: 2,\n        debounceTimeout: 300,\n        onChange: this.checkUsernameAvailability,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(Alert, {\n        className: {\n          'username-availability-warning': true,\n          'visibility-hidden': this.state.usernameAvailable\n        },\n        variant: \"danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, this.state.username), \" is already taken, try another username.\")), React.createElement(Form.Group, {\n        controlId: \"formPassword\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(Form.Control, {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"Password\",\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      })), React.createElement(Button, {\n        variant: \"primary\",\n        type: \"submit\",\n        onClick: this.handleRegistration,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"Registration\"));\n    }\n  }]);\n\n  return Registration;\n}(Component);\n\nexport default withRouter(Registration);","map":{"version":3,"sources":["D:\\my_project\\test\\React App\\src\\pages\\authentication\\registration\\Registration.js"],"names":["React","Component","Alert","Form","Button","withRouter","DebounceInput","ChatHttpServer","Registration","props","handleRegistration","event","preventDefault","loadingState","register","state","response","error","alert","setLS","userId","history","push","checkUsernameAvailability","target","value","undefined","setState","username","usernameAvailable","handleInputChange","name","password"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Alert, Form, Button } from 'react-bootstrap';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { DebounceInput } from 'react-debounce-input';\r\n\r\nimport ChatHttpServer from '../../../utils/ChatHttpServer.js';\r\nimport './Registration.css';\r\n\r\nclass Registration extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      username: '',\r\n      password: '',\r\n      usernameAvailable: true\r\n    };\r\n  }\r\n\r\n  handleRegistration = async (event) => {\r\n    event.preventDefault();\r\n    this.props.loadingState(true);\r\n    try {\r\n      const response = await ChatHttpServer.register(this.state);\r\n      this.props.loadingState(false);\r\n      if (response.error) {\r\n        alert('Unable to register, try after some time.')\r\n      } else {\r\n        ChatHttpServer.setLS('userid', response.userId);\r\n        this.props.history.push(`/home`);\r\n      }\r\n    } catch (error) {\r\n      this.props.loadingState(false);\r\n      alert('Unable to register, try after some time.')\r\n    }\r\n  }\r\n\r\n  checkUsernameAvailability = async (event)  => {\r\n    if(event.target.value !== '' && event.target.value !== undefined) {\r\n      this.setState({\r\n        username: event.target.value\r\n      });\r\n      this.props.loadingState(true);\r\n      try {\r\n        const response = await ChatHttpServer.checkUsernameAvailability(this.state.username);\r\n        this.props.loadingState(false);\r\n        if(response.error) {\r\n          this.setState({\r\n            usernameAvailable: false\r\n          });\r\n        } else {\r\n          this.setState({\r\n            usernameAvailable: true\r\n          });\r\n        }\r\n      } catch (error) {\r\n        this.props.loadingState(false);\r\n        this.setState({\r\n          usernameAvailable: false\r\n        });\r\n      }\r\n    } else if (event.target.value === '') {\r\n      this.setState({\r\n        usernameAvailable: true\r\n      });\r\n    }  \r\n  }\r\n\r\n  handleInputChange = (event) => {\r\n    this.setState({\r\n      [event.target.name]: event.target.value\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Form className=\"auth-form\">\r\n        <Form.Group controlId=\"formUsername\">\r\n          <DebounceInput\r\n            className=\"form-control\"\r\n            placeholder = \"Enter username\"\r\n            minLength={2}\r\n            debounceTimeout={300}\r\n            onChange={this.checkUsernameAvailability} />\r\n          <Alert className={{\r\n            'username-availability-warning' : true,\r\n            'visibility-hidden': this.state.usernameAvailable\r\n          }}  variant=\"danger\">\r\n            <strong>{this.state.username}</strong> is already taken, try another username.\r\n          </Alert>\r\n        </Form.Group>\r\n\r\n        <Form.Group controlId=\"formPassword\">\r\n          <Form.Control \r\n            type = \"password\"\r\n            name = \"password\"\r\n            placeholder = \"Password\"\r\n            onChange = {\r\n              this.handleInputChange\r\n            }\r\n          />\r\n        </Form.Group>\r\n        <Button variant=\"primary\" type=\"submit\" onClick={this.handleRegistration}>\r\n          Registration\r\n        </Button>\r\n      </Form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(Registration)\r\n"]},"metadata":{},"sourceType":"module"}